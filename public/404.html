<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting…</title>

    <!-- GitHub Pages 404 → SPA 라우팅 -->
    <script>
      (function () {
        /* ① 저장소 루트 경로 — vite.config.ts의 base와 같아야 함 */
        const BASENAME = '/';     // 예: '/<repo-name>/'

        /* ② 현재 경로·쿼리·해시 조합 */
        const fullPath = location.pathname + location.search + location.hash;

        /* ③ index.html 로 보내면서 원래 경로를 ?p= 로 넘김 */
        // 이중 인코딩 문제 방지를 위해 슬래시를 특별 처리
        let pathToEncode = fullPath;
        if (pathToEncode.startsWith('/')) {
          // 슬래시를 임시로 마크하여 이중 인코딩 방지
          pathToEncode = 'SLASH_MARKER' + pathToEncode.substring(1);
        }
        const encoded = encodeURIComponent(pathToEncode).replace('SLASH_MARKER', '/');
        const target = BASENAME + '?p=' + encoded;

        location.replace(target);
      })();
    </script>
  </head>
  <body></body>
</html>
